{% extends "company/base.html" %}
{% block employee %}
    active
{% endblock %}

{% block content %}
    <!-- Bootstrap的面板控件 -->
    <div class="panel panel-primary">
        <div class="panel-heading">
            <!-- 这里添加标题 -->
            <h3 class="panel-title">员工列表</h3>
        </div>
        <!-- 将表格放在panel-body中 -->
        <div class="panel-body">
            <div class="row">
                <div class="col-md-3 pull-right" style="margin-bottom: 15px;">
                    <div>
                        <a href="/Apps/company/add_employee/" class="btn btn-primary pull-right">
                            <i class="fa fa-user-plus fa-fw" aria-hidden="true"></i>
                            &nbsp;增加记录
                        </a>
                        <!-- 给增加按钮加Bootstrap样式、Font Awesome图标 -->
                    </div>
                </div>
            </div>
            <!-- 给表格增加Bootstrap样式 -->
            <table class="table table-bordered table-condensed table-striped table-hover">
                <thead>
                <tr>
                    <th style="text-align: center; vertical-align: middle;">姓名</th>
                    <th style="text-align: center; vertical-align: middle;">邮箱</th>
                    <th style="text-align: center; vertical-align: middle;">薪水</th>
                    <th style="text-align: center; vertical-align: middle;">地址</th>
                    <th style="text-align: center; vertical-align: middle;">部门</th>
                    <th style="text-align: center; vertical-align: middle;">团体</th>
                    <th style="text-align: center; vertical-align: middle;" colspan="2">操作</th>
                </tr>
                </thead>
                <tbody>
                {% for employee in employee_list %}
                    <tr>
                        <td style="text-align: center; vertical-align: middle;">{{ employee.name }}</td>
                        <td style="text-align: center; vertical-align: middle;">{{ employee.name }}</td>
                        <td style="text-align: center; vertical-align: middle;">{{ employee.name }}</td>
                        <!-- 通过一对一键关联关系取得地址address -->
                        <td style="text-align: center; vertical-align: middle;">{{ employee.info.address }}</td>
                        <!-- 通过外键关联关系取得部门名称 -->
                        <td style="text-align: center; vertical-align: middle;">{{ employee.department.name }}</td>
                        <td style="text-align: center; vertical-align: middle;">
                            <!-- employee是employee的实例对象，它通过多对多键关联到group数据表，
                            通过.all取得全部记录，再通过循环取得group每条记录名称 -->
                            {% for group in employee.group.all %}
                                <!-- 判断，如果是最后一条记录，名字后面不加逗号；
                                如果不是最后一条记录，在名字后加逗号，主要目的是用逗号分隔开团体名称 -->
                                {% if forloop.last %}
                                {{ group.name }}
                                {% else %}
                                {{ group.name }},
                                {% endif %}
                            {% endfor %}
                        </td>
                        <td align="center">
                            <a href="/company/del_employee/{{ employee.id }}/" class="btn btn-danger">
                                <i class="fa fa-trash-o fa-fw" aria-hidden="true"></i>&nbsp;删除
                            </a>
                        </td>
                        <td align="center">
                            <a href="/company/edit_employee/{{ employee.id }}/" class="btn btn-info">
                                <i class="fa fa-pencil-square-o" aria-hidden="true"></i>&nbsp;修改
                            </a>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="7">无相关记录！</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}